<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Present Tense Practice ‚Äì One by One</title>

<style>
  body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #6dd5fa, #2980b9);
    color: #fff;
    max-width: 650px;
    margin: 0 auto;
    padding: 30px;
    text-align: center;
  }

  /* ANIMATIONS */
  .fadeIn {
    animation: fadeIn 0.6s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .pop {
    animation: pop 0.3s ease;
  }
  @keyframes pop {
    0% { transform: scale(0.8); }
    100% { transform: scale(1); }
  }

  #card {
    background: #fff;
    color: #222;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 6px 14px rgba(0,0,0,0.25);
    font-size: 1.6rem;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 25px;
  }

  button {
    padding: 12px 20px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: transform 0.15s;
  }
  button:hover {
    transform: scale(1.05);
  }

  .optionBtn { background: #ffdd57; color: #222; }
  .chosen { background: #4caf50 !important; color: #fff !important; }

  #goOn { 
    background: #4caf50; 
    color: #fff; 
    display: none; 
    animation: fadeIn 0.5s ease;
  }

  #feedback {
    font-size: 1.2rem;
    margin-top: 15px;
    font-weight: bold;
    min-height: 40px;
  }

  #score, #timer {
    margin-top: 15px;
    font-size: 1.2rem;
    font-weight: bold;
  }

  #orderBox {
    background: rgba(255,255,255,0.2);
    padding: 10px;
    border-radius: 10px;
    min-height: 40px;
    margin-bottom: 15px;
    font-size: 1.2rem;
  }
</style>
</head>
<body>

<!-- üîµ NAME SCREEN -->
<div id="nameScreen" class="fadeIn">
  <h2>üëã Welcome!</h2>
  <p>Please write your name to start:</p>
  <input id="studentNameInput" type="text" placeholder="Your name" style="padding:10px; font-size:1rem; border-radius:8px; border:none;">
  <br><br>
  <button onclick="startGame()" style="background:#4caf50; color:#fff;">START</button>
</div>

<!-- üîµ GAME SCREEN -->
<div id="gameScreen" style="display:none;">

<h1 class="fadeIn">üî• Present Tense Practice üî•</h1>

<div id="score">Score: 0</div>
<div id="timer">Time: 0s</div>

<div id="card" class="fadeIn">Loading...</div>

<div id="orderBox"></div>

<div id="options"></div>

<div id="feedback"></div>

<button id="goOn" onclick="nextQuestion()">GO ON</button>

</div>

<script>
/* ---------------------------------------------------
   üß† BANK OF SENTENCES (A2‚ÄìB1, ampliado)
--------------------------------------------------- */
const simpleSentences = [
  "She usually gets up early.",
  "I never drink tea in the morning.",
  "He often plays basketball after school.",
  "We always walk to class.",
  "They sometimes watch TV in the evening.",
  "My brother studies French at school.",
  "I go to the gym twice a week.",
  "We live near the city center.",
  "He plays the guitar very well.",
  "My parents work in a hospital.",
  "The bus arrives at 8:15 every day.",
  "I read a book before bed.",
  "She cooks dinner for her family.",
  "They visit their grandparents on Sundays.",
  "He watches football every weekend.",
  "We clean our room on Saturdays.",
  "She listens to music while she studies.",
  "They walk their dog every afternoon.",
  "My sister plays video games after homework.",
  "He eats cereal for breakfast.",
  "We study English at school.",
  "She wears glasses.",
  "They go shopping on Fridays.",
  "He helps his dad in the garden.",
  "We start class at 8:00.",
  "I check my phone in the morning.",
  "She loves chocolate ice cream.",
  "She doesn‚Äôt like spicy food.",
  "I don‚Äôt eat meat.",
  "He doesn‚Äôt play tennis.",
  "We don‚Äôt watch TV during the week.",
  "They don‚Äôt live near here.",
  "My sister doesn‚Äôt study German.",
  "He doesn‚Äôt drink coffee.",
  "I don‚Äôt go out on weekdays.",
  "She doesn‚Äôt read magazines.",
  "They don‚Äôt clean their room often.",
  "Do you like chocolate?",
  "Does she play the piano?",
  "Do they live in this neighborhood?",
  "Does he study English at school?",
  "Do we have class today?",
  "Does your brother play football?",
  "Do you walk to school?",
  "Does she work on weekends?",
  "Do they visit their grandparents often?",
  "Does he drink tea in the morning?"
];

const continuousSentences = [
  "She is studying English right now.",
  "They are doing their homework at the moment.",
  "We are having lunch at the moment.",
  "He is running in the park right now.",
  "I am reading a really good book.",
  "She is cooking dinner for her family.",
  "They are playing football outside.",
  "We are waiting for the bus.",
  "He is listening to music with headphones.",
  "My friends are studying for the exam.",
  "I am cleaning my room right now.",
  "She is talking on the phone.",
  "They are watching a movie together.",
  "We are walking to school.",
  "He is drawing a picture.",
  "I am writing an email.",
  "She is learning how to drive.",
  "They are preparing a presentation.",
  "We are planning our weekend trip.",
  "He is fixing his bike.",
  "I am feeding the cat.",
  "She is practicing the piano.",
  "They are buying snacks at the shop.",
  "We are playing a board game.",
  "He is brushing his teeth.",
  "I am looking for my keys.",
  "She is opening the window.",
  "They are laughing at a joke.",
  "We are studying together right now.",
  "I am not watching TV right now.",
  "She is not doing her homework.",
  "They are not listening to the teacher.",
  "He is not eating lunch at the moment.",
  "We are not playing today.",
  "I am not feeling well.",
  "She is not wearing her uniform.",
  "They are not studying for the test.",
  "He is not running today.",
  "We are not cooking dinner now.",
  "Are you studying right now?",
  "Is she doing her homework?",
  "Are they playing football?",
  "Is he watching TV at the moment?",
  "Are we meeting today?",
  "Is your brother coming with us?",
  "Are they laughing at the joke?",
  "Is she cooking dinner now?",
  "Are you listening to me?",
  "Is he working today?"
];

/* ---------------------------------------------------
   üéâ FUN FEEDBACK
--------------------------------------------------- */
const funCorrect = [
  "You‚Äôre doing great, bro!",
  "Broooo, nailed it!",
  "üî• You‚Äôre on fire!",
  "Yes sirrrr!",
  "Let‚Äôs goooo!",
  "Correct! You‚Äôre unstoppable!"
];

const funIncorrect = [
  "Oh man‚Ä¶ try again!",
  "Epic fail‚Ä¶ but you got this!",
  "Bro‚Ä¶ seriously?",
  "Nope! Give it another shot!",
  "Not today, my friend!",
  "Oof. Try again!"
];

/* ---------------------------------------------------
   üîß VARIABLES
--------------------------------------------------- */
let current = {};
let score = 0;
let timer = 0;
let timerInterval;
let studentName = "";

/* ---------------------------------------------------
   üü¢ START GAME
--------------------------------------------------- */
function startGame() {
  const input = document.getElementById("studentNameInput").value.trim();

  if (input === "") {
    alert("Please enter your name.");
    return;
  }

  studentName = input;

  document.getElementById("nameScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "block";

  randomQuestion();
  renderQuestion();
}

/* ---------------------------------------------------
   ‚è±Ô∏è TIMER
--------------------------------------------------- */
function startTimer() {
  timer = 0;
  document.getElementById("timer").textContent = "Time: 0s";
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer++;
    document.getElementById("timer").textContent = "Time: " + timer + "s";
  }, 1000);
}

/* ---------------------------------------------------
   üì° GOOGLE SHEETS CONNECTION
--------------------------------------------------- */
const GOOGLE_SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyDwpgsJ3XcgW2kdjSo6j5QWDz1L7-DmB1dBCWFpx3L94VgM9GM96hOwAHyckTpIvhGLQ/exec";

function logToSheet(question, answer, time) {
  fetch(GOOGLE_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      name: studentName,
      question: question,
      answer: answer,
      time: time,
      timestamp: new Date().toISOString()
    })
  });
}

/* ---------------------------------------------------
   üé≤ GENERATE RANDOM QUESTION
--------------------------------------------------- */
function randomQuestion() {
  const type = Math.random() < 0.5 ? "simple" : "continuous";

  if (type === "simple") {
    current = {
      text: simpleSentences[Math.floor(Math.random() * simpleSentences.length)],
      correct: "Present Simple",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  } else {
    current = {
      text: continuousSentences[Math.floor(Math.random() * continuousSentences.length)],
      correct: "Present Continuous",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  }
}

/* ---------------------------------------------------
   üé® RENDER QUESTION
--------------------------------------------------- */
function renderQuestion() {
  document.getElementById("feedback").textContent = "";
  document.getElementById("goOn").style.display = "none";
  document.getElementById("orderBox").textContent = "";

  document.getElementById("card").textContent = current.text;
  document.getElementById("card").classList.add("fadeIn");

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  startTimer();

  if (current.mode === "multiple") {
    ["Present Simple", "Present Continuous"].forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.className = "optionBtn fadeIn";
      btn.onclick = () => checkAnswer(opt);
      optionsDiv.appendChild(btn);
    });
  } else {
    const words = current.text.replace(/[?.,!]/g, "").split(" ");
    const shuffled = words.sort(() => Math.random() - 0.5);

    current.typed = [];

    shuffled.forEach(w => {
      const btn = document.createElement("button");
      btn.textContent = w;
      btn.className = "optionBtn fadeIn";
      btn.onclick = () => pickWord(w, btn);
      optionsDiv.appendChild(btn);
    });
  }
}

/* ---------------------------------------------------
   ‚úîÔ∏è CHECK ANSWER (MULTIPLE CHOICE)
--------------------------------------------------- */
function checkAnswer(choice) {
  const feedback = document.getElementById("feedback");

  if (choice === current.correct) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    feedback.textContent = funCorrect[Math.floor(Math.random() * funCorrect.length)];
    feedback.style.color = "#ffeb3b";
    feedback.classList.add("pop");

    logToSheet(current.text, choice, timer);

    clearInterval(timerInterval);

    document.querySelectorAll(".optionBtn").forEach(b => b.disabled = true);

    document.getElementById("goOn").style.display = "inline-block";
  } else {
    feedback.textContent = funIncorrect[Math.floor(Math.random() * funIncorrect.length)];
    feedback.style.color = "#fff";
    feedback.classList.add("pop");
  }
}

/* ---------------------------------------------------
   üß© CHECK ORDERING MODE (FIXED)
--------------------------------------------------- */
function pickWord(word, btn) {
  btn.classList.add("chosen");
  btn.disabled = true;

  current.typed.push(word);
  document.getElementById("orderBox").textContent = current.typed.join(" ");

  const normalize = s =>
    s
      .replace(/[?.,!]/g, "")
      .replace(/\s+/g, " ")
      .trim()
      .toLowerCase();

  const cleanOriginal = normalize(current.text);
  const cleanTyped = normalize(current.typed.join(" "));

  if (cleanTyped === cleanOriginal) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    const feedback = document.getElementById("feedback");
    feedback.textContent = funCorrect[Math.floor(Math.random() * funCorrect.length)];
    feedback.style.color = "#ffeb3b";
    feedback.classList.add("pop");

    logToSheet(current.text, "Ordered correctly", timer);

    clearInterval(timerInterval);

    document.querySelectorAll(".optionBtn").forEach(b => b.disabled = true);

    document.getElementById("goOn").style.display = "inline-block";
  }
}

/* ---------------------------------------------------
   ‚è≠Ô∏è NEXT QUESTION
--------------------------------------------------- */
function nextQuestion() {
  randomQuestion();
  renderQuestion();
}
</script>

</body>
</html>
