<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Present Tense Practice â€“ One by One</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #6dd5fa, #2980b9);
    color: #fff;
    max-width: 600px;
    margin: 0 auto;
    padding: 30px;
    text-align: center;
  }
  #card {
    background: #fff;
    color: #222;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    font-size: 1.2rem;
    margin-bottom: 20px;
  }
  button {
    padding: 12px 20px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  .optionBtn { background: #ffdd57; color: #222; }
  .chosen { background: #4caf50 !important; color: #fff !important; }
  #goOn { background: #4caf50; color: #fff; display: none; }
  #feedback {
    font-size: 1.1rem;
    margin-top: 15px;
    font-weight: bold;
    min-height: 40px;
  }
  #score {
    margin-top: 15px;
    font-size: 1.1rem;
    font-weight: bold;
  }
  #timer {
    margin-top: 10px;
    font-size: 1.1rem;
    font-weight: bold;
  }
  #orderBox {
    background: rgba(255,255,255,0.2);
    padding: 10px;
    border-radius: 10px;
    min-height: 40px;
    margin-bottom: 15px;
    font-size: 1.1rem;
  }
</style>
</head>
<body>

<h1>ðŸ”¥ Present Tense Practice ðŸ”¥</h1>

<div id="score">Score: 0</div>
<div id="timer">Time: 0s</div>

<div id="card">Loading...</div>

<div id="orderBox"></div>

<div id="options"></div>

<div id="feedback"></div>

<button id="goOn" onclick="nextQuestion()">GO ON</button>

<script>
/* ---------------- SENTENCE BANKS ---------------- */
const simpleSentences = [
  "She usually gets up early.",
  "I never drink tea in the morning.",
  "He often plays basketball after school.",
  "We always walk to class.",
  "They sometimes watch TV in the evening."
];

const continuousSentences = [
  "She is studying English right now.",
  "They are doing their homework at the moment.",
  "I am not watching TV right now.",
  "We are having lunch at the moment.",
  "He is running in the park right now."
];

const funCorrect = [
  "Youâ€™re doing great, bro!",
  "Broooo, nailed it!",
  "ðŸ”¥ Youâ€™re on fire!",
  "Yes sirrrr!",
  "Letâ€™s goooo!",
  "Correct! Youâ€™re unstoppable!"
];

const funIncorrect = [
  "Oh manâ€¦ try again!",
  "Epic failâ€¦ but you got this!",
  "Broâ€¦ seriously?",
  "Nope! Give it another shot!",
  "Not today, my friend!",
  "Oof. Try again!"
];

/* ---------------- VARIABLES ---------------- */
let current = {};
let score = 0;
let timer = 0;
let timerInterval;

/* ---------------- TIMER ---------------- */
function startTimer() {
  timer = 0;
  document.getElementById("timer").textContent = "Time: 0s";
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer++;
    document.getElementById("timer").textContent = "Time: " + timer + "s";
  }, 1000);
}

/* ---------------- GOOGLE SHEETS LOGGING ---------------- */
const GOOGLE_SCRIPT_URL = "PASTE_YOUR_SCRIPT_URL_HERE";

function logToSheet(question, answer, time) {
  fetch(GOOGLE_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      question: question,
      answer: answer,
      time: time,
      timestamp: new Date().toISOString()
    })
  });
}

/* ---------------- QUESTION GENERATION ---------------- */
function randomQuestion() {
  const type = Math.random() < 0.5 ? "simple" : "continuous";

  if (type === "simple") {
    current = {
      text: simpleSentences[Math.floor(Math.random() * simpleSentences.length)],
      correct: "Present Simple",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  } else {
    current = {
      text: continuousSentences[Math.floor(Math.random() * continuousSentences.length)],
      correct: "Present Continuous",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  }
}

function renderQuestion() {
  document.getElementById("feedback").textContent = "";
  document.getElementById("goOn").style.display = "none";
  document.getElementById("orderBox").textContent = "";

  document.getElementById("card").textContent = current.text;

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  startTimer();

  if (current.mode === "multiple") {
    ["Present Simple", "Present Continuous"].forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.className = "optionBtn";
      btn.onclick = () => checkAnswer(opt);
      optionsDiv.appendChild(btn);
    });
  } else {
    const words = current.text.replace(".", "").split(" ").sort(() => Math.random() - 0.5);
    current.typed = [];

    words.forEach(w => {
      const btn = document.createElement("button");
      btn.textContent = w;
      btn.className = "optionBtn";
      btn.onclick = () => pickWord(w, btn);
      optionsDiv.appendChild(btn);
    });
  }
}

/* ---------------- ANSWER CHECKING ---------------- */
function checkAnswer(choice) {
  const feedback = document.getElementById("feedback");

  if (choice === current.correct) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    feedback.textContent = funCorrect[Math.floor(Math.random() * funCorrect.length)];
    feedback.style.color = "#ffeb3b";

    logToSheet(current.text, choice, timer);

    clearInterval(timerInterval);
    document.getElementById("goOn").style.display = "inline-block";
  } else {
    feedback.textContent = funIncorrect[Math.floor(Math.random() * funIncorrect.length)];
    feedback.style.color = "#fff";
  }
}

function pickWord(word, btn) {
  btn.classList.add("chosen");
  btn.disabled = true;

  current.typed.push(word);
  document.getElementById("orderBox").textContent = current.typed.join(" ");

  if (current.typed.join(" ") === current.text.replace(".", "")) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    document.getElementById("feedback").textContent =
      funCorrect[Math.floor(Math.random() * funCorrect.length)];
    document.getElementById("feedback").style.color = "#ffeb3b";

    logToSheet(current.text, "Ordered correctly", timer);

    clearInterval(timerInterval);
    document.getElementById("goOn").style.display = "inline-block";
  }
}

/* ---------------- NEXT QUESTION ---------------- */
function nextQuestion() {
  randomQuestion();
  renderQuestion();
}

/* ---------------- INIT ---------------- */
randomQuestion();
renderQuestion();
</script>

</body>
</html>
