<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Present Tense Practice ‚Äì One by One</title>

<style>
  body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #6dd5fa, #2980b9);
    color: #fff;
    max-width: 650px;
    margin: 0 auto;
    padding: 30px;
    text-align: center;
  }
  #card {
    background: #fff;
    color: #222;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 6px 14px rgba(0,0,0,0.25);
    font-size: 1.6rem;
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: 25px;
  }
  button {
    padding: 12px 20px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  .optionBtn { background: #ffdd57; color: #222; }
  .chosen { background: #4caf50 !important; color: #fff !important; }
  #goOn { background: #4caf50; color: #fff; display: none; }
  #feedback {
    font-size: 1.2rem;
    margin-top: 15px;
    font-weight: bold;
    min-height: 40px;
  }
  #score, #timer {
    margin-top: 15px;
    font-size: 1.2rem;
    font-weight: bold;
  }
  #orderBox {
    background: rgba(255,255,255,0.2);
    padding: 10px;
    border-radius: 10px;
    min-height: 40px;
    margin-bottom: 15px;
    font-size: 1.2rem;
  }
</style>
</head>
<body>

<h1>üî• Present Tense Practice üî•</h1>

<div id="score">Score: 0</div>
<div id="timer">Time: 0s</div>

<div id="card">Loading...</div>

<div id="orderBox"></div>

<div id="options"></div>

<div id="feedback"></div>

<button id="goOn" onclick="nextQuestion()">GO ON</button>

<script>
/* ---------------------------------------------------
   üß† BANK OF SENTENCES (A2‚ÄìB1, ampliado)
--------------------------------------------------- */
const simpleSentences = [
  "She usually gets up early.",
  "I never drink tea in the morning.",
  "He often plays basketball after school.",
  "We always walk to class.",
  "They sometimes watch TV in the evening.",
  "My brother studies French at school.",
  "I go to the gym twice a week.",
  "She doesn‚Äôt like spicy food.",
  "We live near the city center.",
  "He plays the guitar very well.",
  "My parents work in a hospital.",
  "The bus arrives at 8:15 every day.",
  "I read a book before bed.",
  "She cooks dinner for her family.",
  "They visit their grandparents on Sundays.",
  "He watches football every weekend.",
  "We clean our room on Saturdays.",
  "I drink water during the day.",
  "She listens to music while she studies.",
  "They walk their dog every afternoon.",
  "My sister plays video games after homework.",
  "He eats cereal for breakfast.",
  "We study English at school.",
  "I take the train to work.",
  "She wears glasses.",
  "They go shopping on Fridays.",
  "He helps his dad in the garden.",
  "We start class at 8:00.",
  "I check my phone in the morning.",
  "She loves chocolate ice cream."
];

const continuousSentences = [
  "She is studying English right now.",
  "They are doing their homework at the moment.",
  "I am not watching TV right now.",
  "We are having lunch at the moment.",
  "He is running in the park right now.",
  "I am reading a really good book.",
  "She is cooking dinner for her family.",
  "They are playing football outside.",
  "We are waiting for the bus.",
  "He is listening to music with headphones.",
  "My friends are studying for the exam.",
  "I am cleaning my room right now.",
  "She is talking on the phone.",
  "They are watching a movie together.",
  "We are walking to school.",
  "He is drawing a picture.",
  "I am writing an email.",
  "She is learning how to drive.",
  "They are preparing a presentation.",
  "We are planning our weekend trip.",
  "He is fixing his bike.",
  "I am feeding the cat.",
  "She is practicing the piano.",
  "They are buying snacks at the shop.",
  "We are playing a board game.",
  "He is brushing his teeth.",
  "I am looking for my keys.",
  "She is opening the window.",
  "They are laughing at a joke.",
  "We are studying together right now."
];

/* ---------------------------------------------------
   üéâ FUN FEEDBACK
--------------------------------------------------- */
const funCorrect = [
  "You‚Äôre doing great, bro!",
  "Broooo, nailed it!",
  "üî• You‚Äôre on fire!",
  "Yes sirrrr!",
  "Let‚Äôs goooo!",
  "Correct! You‚Äôre unstoppable!"
];

const funIncorrect = [
  "Oh man‚Ä¶ try again!",
  "Epic fail‚Ä¶ but you got this!",
  "Bro‚Ä¶ seriously?",
  "Nope! Give it another shot!",
  "Not today, my friend!",
  "Oof. Try again!"
];

/* ---------------------------------------------------
   üîß VARIABLES
--------------------------------------------------- */
let current = {};
let score = 0;
let timer = 0;
let timerInterval;

/* ---------------------------------------------------
   ‚è±Ô∏è TIMER
--------------------------------------------------- */
function startTimer() {
  timer = 0;
  document.getElementById("timer").textContent = "Time: 0s";
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer++;
    document.getElementById("timer").textContent = "Time: " + timer + "s";
  }, 1000);
}

/* ---------------------------------------------------
   üì° GOOGLE SHEETS CONNECTION
--------------------------------------------------- */
const GOOGLE_SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbyDwpgsJ3XcgW2kdjSo6j5QWDz1L7-DmB1dBCWFpx3L94VgM9GM96hOwAHyckTpIvhGLQ/exec";

function logToSheet(question, answer, time) {
  fetch(GOOGLE_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      question: question,
      answer: answer,
      time: time,
      timestamp: new Date().toISOString()
    })
  });
}

/* ---------------------------------------------------
   üé≤ GENERATE RANDOM QUESTION
--------------------------------------------------- */
function randomQuestion() {
  const type = Math.random() < 0.5 ? "simple" : "continuous";

  if (type === "simple") {
    current = {
      text: simpleSentences[Math.floor(Math.random() * simpleSentences.length)],
      correct: "Present Simple",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  } else {
    current = {
      text: continuousSentences[Math.floor(Math.random() * continuousSentences.length)],
      correct: "Present Continuous",
      mode: Math.random() < 0.5 ? "multiple" : "order"
    };
  }
}

/* ---------------------------------------------------
   üé® RENDER QUESTION (FIXED)
--------------------------------------------------- */
function renderQuestion() {
  document.getElementById("feedback").textContent = "";
  document.getElementById("goOn").style.display = "none";
  document.getElementById("orderBox").textContent = "";

  document.getElementById("card").textContent = current.text;

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = ""; // üî• LIMPIA OPCIONES

  startTimer();

  if (current.mode === "multiple") {
    ["Present Simple", "Present Continuous"].forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.className = "optionBtn";
      btn.onclick = () => checkAnswer(opt);
      optionsDiv.appendChild(btn);
    });
  } else {
    const words = current.text.replace(".", "").split(" ");
    const shuffled = words.sort(() => Math.random() - 0.5);

    current.typed = [];

    shuffled.forEach(w => {
      const btn = document.createElement("button");
      btn.textContent = w;
      btn.className = "optionBtn";
      btn.onclick = () => pickWord(w, btn);
      optionsDiv.appendChild(btn);
    });
  }
}

/* ---------------------------------------------------
   ‚úîÔ∏è CHECK ANSWER (MULTIPLE CHOICE)
--------------------------------------------------- */
function checkAnswer(choice) {
  const feedback = document.getElementById("feedback");

  if (choice === current.correct) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    feedback.textContent = funCorrect[Math.floor(Math.random() * funCorrect.length)];
    feedback.style.color = "#ffeb3b";

    logToSheet(current.text, choice, timer);

    clearInterval(timerInterval);

    document.querySelectorAll(".optionBtn").forEach(b => b.disabled = true);

    document.getElementById("goOn").style.display = "inline-block";
  } else {
    feedback.textContent = funIncorrect[Math.floor(Math.random() * funIncorrect.length)];
    feedback.style.color = "#fff";
  }
}

/* ---------------------------------------------------
   üß© CHECK ORDERING MODE (FIXED)
--------------------------------------------------- */
function pickWord(word, btn) {
  btn.classList.add("chosen");
  btn.disabled = true;

  current.typed.push(word);
  document.getElementById("orderBox").textContent = current.typed.join(" ");

  const cleanOriginal = current.text.replace(".", "").trim();
  const cleanTyped = current.typed.join(" ").trim();

  if (cleanTyped === cleanOriginal) {
    score++;
    document.getElementById("score").textContent = "Score: " + score;

    document.getElementById("feedback").textContent =
      funCorrect[Math.floor(Math.random() * funCorrect.length)];
    document.getElementById("feedback").style.color = "#ffeb3b";

    logToSheet(current.text, "Ordered correctly", timer);

    clearInterval(timerInterval);

    document.querySelectorAll(".optionBtn").forEach(b => b.disabled = true);

    document.getElementById("goOn").style.display = "inline-block";
  }
}

/* ---------------------------------------------------
   ‚è≠Ô∏è NEXT QUESTION
--------------------------------------------------- */
function nextQuestion() {
  randomQuestion();
  renderQuestion();
}

/* ---------------------------------------------------
   üöÄ INIT
--------------------------------------------------- */
randomQuestion();
renderQuestion();
</script>

</body>
</html>s
